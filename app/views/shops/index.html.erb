<div class="container py-4">
  <div class="text-center mb-4">
    <h1 class="h3 mb-2">Available Shops & Products</h1>
    <p class="text-muted">Browse shops and see their available products.</p>
  </div>

  <% if @shops.any? %>
    <% @shops.each do |shop| %>
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <!-- Shop Name -->
          <h4 class="card-title">
            <%= link_to shop.name, shop_path(shop), class: "text-decoration-none" %>
          </h4>

          <!-- Products Grid -->
          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-2">
            <% shop.products.in_stock.each do |product| %>
              <div class="col">
                <div class="card h-100 border">
                  <div class="card-body d-flex flex-column">
                    <h6 class="card-title mb-2"><%= product.name %></h6>
                    <p class="card-text mb-1">
                      <strong>Price:</strong> <%= number_to_currency(product.price) %>
                    </p>
                    <p class="card-text mb-2">
                      <strong>Stock:</strong>
                      <span class="<%= product.stock.positive? ? 'text-success' : 'text-danger' %>">
                        <%= product.stock %>
                      </span>
                    </p>
                    <%= link_to "View Shop", shop_path(shop),
                      class: "btn btn-sm btn-primary mt-auto" %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="text-center text-muted py-5">
      <p>No shops with available products.</p>
    </div>
  <% end %>
</div>
